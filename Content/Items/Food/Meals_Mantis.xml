<?xml version="1.0" encoding="utf-8"?>
<Override>
  <Items>
  
    <!--Mantis-->    
    
    <!-- Mantis Tempura (raw)  -->
    <Item name="Raw Mantis Tempura" identifier="he-mantistempuraraw" category="Misc" subcategory="Food" maxstacksize="4" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" description="" Tags="smallitem,fooditem,allowinfryer,petfood1,petfood2,petfood3,monsterfood" useinhealthinterface="false" scale="0.5" impactsoundtag="impact_softitem" isshootable="True" requireaimtouse="True">
      <PreferredContainer secondary="crewcab" amount="1" spawnprobability="0.0" notcampaign="True"/>
      <PreferredContainer primary="kitchen" secondary="table,crewcab"/>
      <Sprite texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="204,72,24,29" depth="0.6" origin="0.5,0.5" />
      <ContainedSprite allowedcontainertags="table" texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="204,72,24,29" depth="0.525" origin="0.5,0.05"  />
      <Fabricate suitablefabricators="cuttingboard" requiredtime="15" requiresrecipe="false" amount="3">
        <RequiredSkill identifier="cooking" level="15" />
        <RequiredItem identifier="he-mantismeatchunk" amount="1" MinCondition="0.25" MaxCondition="1.0" UseCondition="False" />
        <RequiredItem identifier="he-flour" mincondition="0.25" UseCondition="true" />
        <RequiredItem tag="egg" amount="1" description="fabricationdescription.smallegg" header="fabricationheader.smallegg" />
      </Fabricate>
      <Deconstruct time="1" requireddeconstructor="deconstructor"/>
      <Body width="24" height="29" density="10" />
      <!-- ItemComponent hosts the effects for frying the item -->
      <ItemComponent canbeselected="false" canbepicked="false" allowingameediting="false">
        <ActiveConditional HasStatusTag="eq activefryer" targetcontainer="true" />
        <!-- MaxValueLength is used to track the time spent in the fryer. It is increased by 1 every second the item is in a container with the "activefryer" status tag -->
        <StatusEffect type="OnActive" target="This" MaxValueLength="1" interval="1" disabledeltatime="true" />
        <!-- Reset the MaxValueLength when the item is no longer contained in a container with the "activefryer" status tag -->
        <StatusEffect type="OnActive" target="This" MaxValueLength="0" setvalue="true" disabledeltatime="true">
          <Conditional HasStatusTag="neq activefryer" targetcontainer="true" />
        </StatusEffect>
        <!-- Check every second if the MaxValueLength reached or exceeded a value of 45, then remove the item and spawn the fried version in its place -->
        <StatusEffect type="OnActive" target="This" interval="1" disabledeltatime="true">
          <Conditional MaxValueLength="gte 45" />
          <Remove />
          <SpawnItem identifier="he-mantistempurafried" spawnposition="SameInventory" spawnifcantbecontained="true" SpawnIfInventoryFull="true" count="1" />
        </StatusEffect>
      </ItemComponent>
      <!-- MemoryComponent hosts the MaxValueLength attribute which we use to track the time by adjusting its value via StatusEffects each second -->
      <MemoryComponent canbepicked="false" canbeselected="false" allowingameediting="false" drawhudwhenequipped="false" string="" MaxValueLength="0" />
      <Holdable DisableWhenRangedWeaponEquipped="true" canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand,LeftHand" aimable="false" handle1="5,-5" msg="ItemMsgPickUpSelect" />
    </Item>
    
    <!-- Mantis Tempura (fried)  -->
    <Item hideinmenus="false" name="Mantis Tempura" identifier="he-mantistempurafried" variantof="he-poisoneffectpreset_regular" category="Misc" subcategory="Food - Mantis" maxstacksize="1" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" description="" Tags="smallitem,fooditem,fingerfood,allowinfryer,petfood1,petfood2,petfood3,monsterfood" useinhealthinterface="false" scale="0.5" impactsoundtag="impact_softitem" isshootable="True" requireaimtouse="True" health="10" >
      <PreferredContainer secondary="crewcab" amount="1" spawnprobability="0.0" notcampaign="True"/>
      <PreferredContainer primary="table" secondary="kitchen,crewcab"/>
      <Sprite texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="204,112,29,24" depth="0.6" origin="0.5,0.5" />
      <ContainedSprite allowedcontainertags="table" texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="204,112,29,24" depth="0.525" origin="0.5,0.05"  />
      <Deconstruct time="1" requireddeconstructor="deconstructor"/>
      <Body width="78" radius="15" density="11" />
      <SuitableTreatment type="hungerDISABLEDFORNOW" suitability="20" />
      <Holdable DisableWhenRangedWeaponEquipped="true" canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="Any,RightHand,LeftHand" aimpos="20,18" holdangle="270" holdpos="36,20" handle1="5,-5" aimangle="0" aimable="false" swingwhenaiming="true" swingamount="10,6" swingspeed="0.2" msg="ItemMsgPickUpSelect">
        <!-- EVERYTHING RELATED TO POISONING FOOD IS HANDLED VIA THE POISON EFFECT PRESET ITEMS DEFINED IN - variantof="" AND THEIR CODE IS LOCATED IN - "/Content/Items/#Presets/#ItemPresets.xml" -->

        <!--////////// BOT EATING \\\\\\\\\\-->
        <!-- Bots "eat" by holding the food in their hands -->
        <StatusEffect type="OnActive" target="This,Character" duration="1" condition="-1" stackable="false" comparison="And">
          <Conditional hunger="gt 1" targetcontainer="true" />
          <Conditional IsPlayer="false" targetcontainer="true" />
          <Conditional IsHuman="true" targetcontainer="true" />
          <Affliction identifier="he-fatrich" amount="35.0" />
          <Affliction identifier="ate_friedfood" amount="1" />
          <Affliction identifier="he-stuffed" amount="1.5" />
          <ReduceAffliction type="hunger" amount="1.5" />
          <Affliction identifier="spill" amount="1000" probability="0.0005" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/EatingCrunchy.ogg" loop="True" range="200" volume="5.0" />
        </StatusEffect>
        
        <!--////////// REGULAR EATING \\\\\\\\\\-->
        <StatusEffect type="OnUse" target="This" Condition="-1">
          <Conditional InWater="false" />
        </StatusEffect>
        <StatusEffect type="OnUse" target="Character" comparison="And">
          <Conditional InWater="false" />
          <Affliction identifier="he-fatrich" amount="35.0" />
          <Affliction identifier="ate_friedfood" amount="1" />
          <Affliction identifier="he-stuffed" amount="1.5" />
          <ReduceAffliction type="hunger" amount="1.5" />
          <Affliction identifier="spill" amount="1000" probability="0.0005" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/EatingCrunchy.ogg" loop="True" range="200" volume="5.0" />
          <ParticleEmitter particle="whitechunks" particlespersecond="2" scalemin="0.15" scalemax="0.2" distancemin="0" distancemax="5" anglemin="200" anglemax="340" velocitymin="10" velocitymax="15" copyentityangle="true" colormultiplier="255,220,50,255" />
        </StatusEffect>
        <StatusEffect type="OnBroken" target="This">
          <Remove />
        </StatusEffect>
      </Holdable>
      <AiTarget sightrange="1000" static="true" />
    </Item>

    <!-- Mantis Thermidor -->
    <Item HideInMenus="false" name="" identifier="he-mantisthermidor" variantof="he-poisoneffectpreset_fork" category="Misc" subcategory="Food" maxstacksize="1" maxstacksizecharacterinventory="1" cargocontaineridentifier="metalcrate" description="" Tags="smallitem,fooditem,foodplate,gourmetfood,petfood1,petfood2,petfood3,monsterfood" useinhealthinterface="false" scale="0.5" impactsoundtag="impact_bottle_glass" isshootable="True" requireaimtouse="True" health="16" >
      <PreferredContainer secondary="abandonedmedcab" spawnprobability="0.02" />
      <PreferredContainer secondary="abandonedcrewcab" minamount="0" maxamount="1" spawnprobability="0.02" />
      <PreferredContainer secondary="crewcab" amount="1" spawnprobability="0.0" notcampaign="True"/>
      <PreferredContainer primary="table" secondary="kitchen,crewcab"/>
      <Sprite texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="858,60,68,29" depth="0.6" origin="0.5,0.5" />
      <ContainedSprite allowedcontainertags="table" texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="858,60,68,29" depth="0.525" origin="0.5,0.65" />
      <InventoryIcon texture="%ModDir:2954998725%/Content/Items/Food/FoodAndMeat.png" sourcerect="858,60,68,29" origin="0.5,0.5" />
      <Fabricate suitablefabricators="oven" requiredtime="80" requiresrecipe="false" amount="1">
        <RequiredSkill identifier="cooking" level="50" />
        <RequiredItem identifier="he-boiledmantismeat" amount="1" UseCondition="false" />
        <RequiredItem identifier="he-molochcheeseslice" amount="3"/>
        <RequiredItem identifier="he-pepper" UseCondition="True" MinCondition="0.15"/>
        <RequiredItem identifier="he-emptyplate" amount="1" usecondition="false" mincondition="0" />
      </Fabricate>
      <Fabricate suitablefabricators="cafeteria" requiredtime="20" requiredmoney="159" fabricationlimitmin="0" fabricationlimitmax="7" />
      <Deconstruct time="1" requireddeconstructor="deconstructor"/>
      <Body width="60" radius="10" density="11" />
      <SuitableTreatment type="hungerDISABLEDFORNOW" suitability="80" />
      <Holdable DisableWhenRangedWeaponEquipped="true" canbepicked="true" canBeCombined="false" removeOnCombined="false" slots="LeftHand,RightHand" holdangle="0" holdpos="36,-20" handle1="0,-18" handle2="0,-18" aimable="false" msg="ItemMsgPickUpSelect">
        <!-- EVERYTHING RELATED TO POISONING FOOD IS HANDLED VIA THE POISON EFFECT PRESET ITEMS DEFINED IN - variantof="" AND THEIR CODE IS LOCATED IN - "/Content/Items/#Presets/#ItemPresets.xml" -->
        
        <!--////////// BOT EATING \\\\\\\\\\-->
        <!-- Bots "eat" by holding the food in their hands -->
        <StatusEffect type="OnActive" target="This,Character" duration="1" condition="-1" stackable="false" comparison="And">
          <Conditional hunger="gt 1" targetcontainer="true" />
          <Conditional IsPlayer="false" targetcontainer="true" />
          <Conditional IsHuman="true" targetcontainer="true" />
          <Affliction identifier="he-proteinrich" amount="50.0" />
          <Affliction identifier="he-calciumrich" amount="30.0" />
          <Affliction identifier="he-stuffed" amount="2.5" />
          <ReduceAffliction type="hunger" amount="2.5" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/EatingSoft.ogg" loop="True" range="200" volume="5.0" />
        </StatusEffect>

        <!--////////// REGULAR EATING \\\\\\\\\\-->
        <!-- Use the item when it's held and the fork in the other hand is used (indicated by applying a "usingfork" tag on the character which this item checks for) -->
        <StatusEffect type="OnActive" target="This" Condition="-1.0" disabledeltatime="true" stackable="false" comparison="And">
          <Conditional HasStatusTag="usingfork" targetcontainer="true" />
          <Conditional HasStatusTag="neq emptyfork" targetcontainer="true" />
          <Conditional InWater="false" />
        </StatusEffect>
        <StatusEffect type="OnSecondaryUse" target="Character" disabledeltatime="true" stackable="false" comparison="And">
          <Conditional HasStatusTag="usingfork" />
          <Conditional HasStatusTag="neq emptyfork"/>
          <Conditional InWater="false" />
          <Affliction identifier="he-proteinrich" amount="50.0" />
          <Affliction identifier="he-calciumrich" amount="30.0" />
          <Affliction identifier="he-stuffed" amount="2.5" />
          <ReduceAffliction type="hunger" amount="2.5" />
          <Affliction identifier="spill" amount="1000" probability="0.0005" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/Fork1.ogg" loop="False" range="200" volume="5.0" selectionmode="Random" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/Fork2.ogg" loop="False" range="200" volume="5.0" selectionmode="Random" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/Fork3.ogg" loop="False" range="200" volume="5.0" selectionmode="Random" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/Fork4.ogg" loop="False" range="200" volume="5.0" selectionmode="Random" />
          <Sound file="%ModDir:2954998725%/Content/Sounds/Items/Food/Fork5.ogg" loop="False" range="200" volume="5.0" selectionmode="Random" />
        </StatusEffect>
        <!-- Prevent using this item continuously by applying the tag "emptyfork" which prevents the StatusEffect that uses the item from triggering again, effectively only allowing it to trigger once per mouse-click -->
        <StatusEffect type="OnActive" target="Character" tags="emptyfork" interval="0.1" duration="0.2">
          <Conditional HasStatusTag="usingfork" />
        </StatusEffect>
        <StatusEffect type="OnBroken" target="This" disabledeltatime="true">
          <Remove />
          <SpawnItem identifier="he-dirtyplate" spawnposition="SameInventory" spawnifcantbecontained="true" />
        </StatusEffect>
      </Holdable>
      <AiTarget sightrange="1000" static="true" />
    </Item>

  </Items>
</Override>